<p align="center">
  <img alt="CYBERTEC Migrator" width="300px" src="https://www.cybertec-postgresql.com/wp-content/uploads/2018/03/Migrator_neu-300x79.png"/>
  <br/><br/>
  <i>Demo database environment for the CYBERTEC Migrator</i>
</p>

---

<p align="center">
  <a href="#installation">Installation</a> •
  <a href="#using-the-demo-environment">Using the demo environment</a> •
  <a href="#contact">Contact</a>
</p>

This repository facilitates the setup of a database environment that may be used in a test-run of the [_CYBERTEC Migrator_](https://www.cybertec-postgresql.com/en/products/cybertec-migrator/), a user-friendly tool that helps you to organize and efficiently migrate Oracle databases to PostgreSQL.

Use the `demo-env` script to
- start a PostgreSQL instance with a `demo` database
- start an Oracle Express Edition instance containing the HR demo schema
- stop both database instances

Both database management systems are provided as container images.
The provided configuration does not use volume containers, which means changes to the databases are not persisted when restarting the instances.

The following table shows the connection strings, user and passwords provided by the default settings

| Parameter   | Migrator connection string   | User     | Password  |
|-------------|------------------------------|----------|-----------|
| `demo_db`   | postgresql//demo:5432/demo   | demo     | demo      |
| `oracle`    | oracle://oracle:1521/xepdb1  | migrator | migrator  |

## Installation

__Requirement__: an installed and running [CYBERTEC Migrator](https://github.com/cybertec-postgresql/cybertec_migrator) (`>= 3.7.0`) since the demo databases join into the existing `Docker` network created by the Migrator.

On the host where the Migrator is installed:

1. Clone this git repository
2. Change directory into cloned repository

```sh
git clone https://github.com/cybertec-postgresql/cybertec_migrator_demo
cd cybertec_migrator_demo
```

## Using the demo environment

| ⚠️   | Running an Oracle instance needs almost 6 GB hard disk space     |
| --- | ---------------------------------------------------------------- |

The [CYBERTEC Migrator](https://github.com/cybertec-postgresql/cybertec_migrator) has to be up and running before starting a demo database, as they join into the existing docker network. \
Docker networks may be listed using `docker network ls`.

* Start the PostgreSQL instance with the `demo` database in the `cybertec_migrator_common` docker network

  ```sh
  ./demo_env up cybertec_migrator_common demo_db
  ```

* Start the Oracle instance with the HR schema in the `cybertec_migrator_common` docker network

  ```sh
  # Starting an Oracle instance takes some time.
  # You can connect to the database when 'docker ps' shows a 'healthy' status.
  ./demo_env up cybertec_migrator_common oracle
  ```

* The following command will stop all running instances

  ```sh
  ./demo_env down cybertec_migrator_common
  ```

The `EXTERNAL_DEMO_POSTGRES_PORT` and `EXTERNAL_DEMO_ORACLE_PORT` variables in the `.env` file (generated by executing the `./demo-env` script) control the choice of port on which the demo databases are served.

## Contact

- [Sales](https://www.cybertec-postgresql.com/en/contact/)
